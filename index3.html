<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bedtime Story Puppets</title>
<style>
  body { font-family: sans-serif; padding: 20px; }
  button { margin: 5px; padding: 10px; cursor: pointer; }

  /* Modal styles */
  .modal {
    display: none; 
    position: fixed; 
    z-index: 1000; 
    left: 0; top: 0; 
    width: 100%; height: 100%; 
    background-color: rgba(0,0,0,0.5); 
    justify-content: center; 
    align-items: center;
  }
  .modal-content {
    background: white; 
    padding: 20px; 
    max-width: 600px; 
    width: 90%; 
    border-radius: 8px;
    position: relative;
  }
  .close {
    position: absolute; 
    top: 10px; right: 15px; 
    font-size: 20px; 
    cursor: pointer;
  }
  .images-container img {
    max-width: 100px; 
    margin-right: 10px;
    display: inline-block;
  }
</style>
</head>
<body>

<h1>Bedtime Story Puppets</h1>
<div id="buttons-container"></div>

<!-- Modal -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span id="close" class="close">&times;</span>
    <h3 id="post-title"></h3>
    <p id="post-body"></p>
    <div id="post-images" class="images-container"></div>
  </div>
</div>

<script>
const animals = ["deer", "cat", "dog", "snake", "elephant", "flower", "rabbit", "horse","fish","bird"];
const buttonsContainer = document.getElementById("buttons-container");
const modal = document.getElementById("modal");
const closeBtn = document.getElementById("close");
const postTitle = document.getElementById("post-title");
const postBody = document.getElementById("post-body");
const postImages = document.getElementById("post-images");

// Create a button for each animal
animals.forEach(animal => {
    const btn = document.createElement("button");
    btn.textContent = animal;
    btn.addEventListener("click", async () => {
        // Load JSON for this animal
        const res = await fetch(`dreams_${animal}_posts.json`);
        const posts = await res.json();

        // Pick 2 random posts
        const randomPosts = posts.sort(() => 0.5 - Math.random()).slice(0, 2);

        // Show modal content (weâ€™ll just show the first post for simplicity)
        const post = randomPosts[0];
        postTitle.textContent = post.title;
        postBody.textContent = post.body;

        // Clear old images
        postImages.innerHTML = "";
        if (post.images) {
            post.images.forEach(imgPath => {
                const img = document.createElement("img");
                img.src = imgPath.replace(/\\/g, "/");
                postImages.appendChild(img);
            });
        }

        modal.style.display = "flex";
    });
    buttonsContainer.appendChild(btn);
});

// Close modal
closeBtn.onclick = () => { modal.style.display = "none"; };
window.onclick = e => { if (e.target == modal) modal.style.display = "none"; };
</script>

</body>
</html>
